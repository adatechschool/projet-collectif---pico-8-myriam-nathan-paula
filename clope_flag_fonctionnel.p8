pico-8 cartridge // http://www.pico-8.com
version 38
__lua__
function _init()

create_player()

end

function _update()

player_movement()
update_camera()
//can_move()
player.y+=gravity

end

function _draw()

cls(0)
draw_map()
draw_player()

end


-->8
-- map

function draw_map()
	map(0,0,0,0,33,18)
end

function check_flag(flag,x,y)
	local sprite=mget(x,y)
	return fget(sprite,flag)
	end
	
-- camera

function update_camera()
	local camx=mid(0,p.x-7.5,32-15)
	local camy=mid (0,p.y-7.5,18-15)
	camera(camx*8,camy*8)
	end


-->8
function create_player()
	p={
		x=0, y=16,
		sprite=1,
		speed=1	
 }
 gravity=0.3
 friction=0.85
end

function draw_player()
	spr(p.sprite,p.x*8,p.y*8)
	end
	
function player_movement()
 newx=p.x
	newy=p.y
	
if (btnp(➡️))  newx+=p.speed
if (btnp(⬅️))  newx-=p.speed
if (btnp(⬆️))  newy-=p.speed
if (btnp(⬇️))  newy+=p.speed

if not check_flag(0,newx,newy)then
	p.x=mid(0,newx,32)
	p.y=mid(0,newy,16)
else
	sfx(0)
	end
end

//function can_move(x, y, w, h)
//	if(check_obstacle(x, y)) return false
//	if(check_obstacle(x+w-1, y)) return false
//	if(check_obstacle(x,y+h-1)) return false
//	if(check_obstacle(x+w-1, y+h-1)) return false
//	return true
//end





//	if can_move(p.x+p.dx, p.y, p.w, p.h) then
	//			p.x+=p.dx
//	end
//	if can_move(p.x, p.y + p.dy, p.w, p.h) then
		//		p.y+=p.dy
//	end
	
//	p.dx=0
//	p.dy=0
//end


			

-->8
--collision
//function collide_map(obj,aim,flag)

__gfx__
00000000000000600000000600000000111111111111111111111111111111110000000000000000000006600000000011111111111111110000000000000000
00000000000000060000006000000000111111111111111111111111111111110000000000000000000067760000000011111111111111110000000000000000
0070070000000060000000060000000011111111111111111111111111111111000000000000000000067776000000001111111111a111110000000000000000
00077000447777904477779000000000111111111111111111111111111111110000000000000000000677776000000011116766111911110000000000000000
00077000000000000000000000000000111111111111111111111111111111110000000000000000000067760000000011167777611111110000000000000000
0070070000000000000000000000000011111111111aaa1111111111111111110000000000000000000006600000000011116776111111110000000000000000
00000000000000000000000000000000111111111aaa511111111111111111110000000000000000000066000000000011111611116676110000000000000000
00000000000000000000000000000000111111111aaa111111111111111111110000000004447777777960000000000011111111167777610000000000000000
0000000000000000000000000000000011111111aaaa111111111111111111110000000004447777777900000000000011111111116776110000000000000000
00000000000000000000000000000000111111115aaaa11111111111111111110000000000003330000000000000000011111116111161110000000000000000
0000000000000000000000000000000011111111aaaaa11a11111111111111110000000000003030000000000000000011111167661111110000000000000000
00000000000000000000000000000000111111111aaaaaa5111111111111111100000000000300030000000000000000111116777761111a0000000000000000
000000000000000000000000000000001111111115aaaa5111111111111111110000000000300003000000000000000011111167761111910000000000000000
0000000000000000000000000000000011111111115a15111111111111111111000000000044000440000000000000001a111111111111110000000000000000
00000000000000000000000000000000111111111111111111111111111111110000000000000000000000000000000011911111111111110000000000000000
00000000000000000000000000000000111111111111111111111111111111110000000000000000000000000000000011111111111111110000000000000000
b33b33b333b3333b0000000011111111111111111111111111111111111111110000000000000060000000066000000006000000044777790977774400000000
3b3b33b3b3343b330555555011111111111111111111111111111111111111110000000000000006000000600600000060000000000880000008800000000000
33b333b343444346a444444a11111111111111111111111111111111111111110000000000000060000000066000000006000000048080000008084000000000
33b3b33b4b5644655444444511111111111111111111111111111111111111110000000044777790447777900977774409777744040080000008004000000000
b3b33b3b04654654554aa45511111111111111111111111111111111111111110000000000880000008800000000880000008800600044000044000600000000
33b3333b040640405455554511111111111111111111111111111111111111110000000008080000080800000000808000008080006006000060060000000000
3b333b33000400005444444511111111111111111111111111111111111111110000000008008000080080000008008000080080060060000006006000000000
3b33b333000000005444444511111111111111111111111111111111111111110000000004404400044044000044044000440440000600000000600000000000
131b13b133b3333b1111111111111111111111111111111111111111111111110000000000006767000067760006760000007000000000000000000000000000
3b3b33b3b3343b331555555111a11111111a11111111111111111111111111110000000000000677000067600000600000060000000000000000000000000000
33b333b343444346a444444a11191111119111111111111111111111111111110000000000000066000006000000060000006000000600000000000000000000
33b3b33b4b5644655444444511111111111111111111111111111111111111110000000044777790447779004477900044790000449000000000000000000000
b3b33b3b14654654554aa45511111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000
33b3333b1416414154555545119111a119111a111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000
3b333b3311141111544444451a11191111a111911111111111111111111111110000000000000000000000000000000000000000000000000000000000000000
3b33b333111111115444444511111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000
__gff__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
2333233304052323332323233323232306060606060606060606060606060607070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3323232314152323232333232323313126262626262626262626332626262607070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2323233323233323332323232333232326262633262626262626262632262607070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3323232323332323233131332323233326262626263326262626263131312607070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2323332323232323232323232323322326262626262626262626262626262607070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2323233131312333232333232331313126262626262626313126262626332607070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2333232323332323313131233323232326262633262626262626262626262607070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2323232333232323232323232323332326262626262626262626263131262607070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3131313131313131313131313131060626262626262633262626262626262607070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2626262633262626060606262626262631313126262626262626262626262607070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2626262626262626332626262626262626262626262626263131262626262607070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2626262626262626262626262631312626262626262626262626262626262607070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2626332626262626263131262626262626263326262626262626263131262607070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2626262626262626262626262626262626262626262626262626262626262623230000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2626262626313131262626262626262626262626262631312626262633262623070f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
2626262626262626262633262626332626262626262626262626262623262623230f00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3326262626262626262626262626262626262626262626262626262626262623230000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
3030303030303030303030303030303030303030303030303030303030303030300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000f00000a05000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
